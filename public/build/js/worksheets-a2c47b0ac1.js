var dialog=document.querySelector("#worksheets-dialog__add"),button=document.querySelector("#worksheet__add");dialog.showModal||dialogPolyfill.registerDialog(dialog),button.addEventListener("click",function(){dialog.showModal()}),dialog.querySelector(".close").addEventListener("click",function(){dialog.close()}),dialog.querySelector(".add").addEventListener("click",function(){for(var e=dialog.querySelectorAll("input[required]:not(:disabled):not([readonly]):not([type=hidden]),select[required]:not(:disabled):not([readonly]),textarea[required]:not(:disabled):not([readonly])"),t=0;t<e.length;t++)if(0==e[t].checkValidity())return;dialog.querySelector("#worksheet-form__add").submit()});var sortable=document.querySelectorAll("th.sortable");sortable.forEach(function(e){var t=e.outerHTML.indexOf("sorted-asc"),r=e.outerHTML.indexOf("sorted-desc");e.addEventListener("click",function(){location.href="/worksheets?orderBy="+this.getAttribute("data-orderby")+"&orderDir="+this.getAttribute("data-orderdir")}),e.addEventListener("mouseover",function(){t==-1&&r==-1&&(this.className=this.className.replace(" mdl-data-table__header--sorted-descending",""),this.className+=" mdl-data-table__header--sorted-descending"),t==-1&&r!=-1&&(this.className=this.className.replace(" mdl-data-table__header--sorted-descending",""),this.className+=" mdl-data-table__header--sorted-ascending"),t!=-1&&r==-1&&(this.className=this.className.replace(" mdl-data-table__header--sorted-ascending",""),this.className+=" mdl-data-table__header--sorted-descending")}),e.addEventListener("mouseout",function(){t==-1&&r==-1&&(this.className=this.className.replace(" mdl-data-table__header--sorted-descending","")),t==-1&&r!=-1&&(this.className=this.className.replace(" mdl-data-table__header--sorted-ascending",""),this.className+=" mdl-data-table__header--sorted-descending"),t!=-1&&r==-1&&(this.className=this.className.replace(" mdl-data-table__header--sorted-descending",""),this.className+=" mdl-data-table__header--sorted-ascending")})});var button2=document.querySelector("#worksheet_filter"),dialog2=document.querySelector("#worksheets-dialog__filter");dialog2.showModal||dialogPolyfill.registerDialog(dialog2),button2.addEventListener("click",function(){dialog2.showModal()}),dialog2.querySelector(".close").addEventListener("click",function(){dialog2.close()}),dialog2.querySelector(".add").addEventListener("click",function(){for(var e=dialog2.querySelectorAll("input[required]:not(:disabled):not([readonly]):not([type=hidden]),select[required]:not(:disabled):not([readonly]),textarea[required]:not(:disabled):not([readonly])"),t=0;t<e.length;t++)if(0==e[t].checkValidity())return;dialog2.querySelector("#worksheets-form__filter").submit()});var button3=document.querySelector("#worksheet__import"),dialog3=document.querySelector("#worksheets-dialog__import"),stepperElement=dialog3.querySelector("ul.mdl-stepper"),Stepper;dialog3.showModal||dialogPolyfill.registerDialog(dialog3),button3.addEventListener("click",function(){dialog3.showModal(),Stepper=stepperElement.MaterialStepper,stepperElement.querySelector(".mdl-step:nth-child(1)").addEventListener("onstepnext",function(e){var t=document.querySelector("#worksheet-form__import"),r=new FormData(t);r.append("worksheet",t.querySelector('input[type="file"]').files[0]);var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(json=JSON.parse(o.responseText),"fail"==json.response&&alert(json.error),Stepper.next())},o.open("POST",t.getAttribute("action"),!0),o.send(r)}),stepperElement.querySelector(".mdl-step:nth-child(1)").addEventListener("onstepcancel",function(e){dialog3.close()}),stepperElement.querySelector(".mdl-step:nth-child(2)").addEventListener("onstepnext",function(e){for(var t=dialog3.querySelector("#worksheet-form__assign"),r=t.querySelectorAll("input[required]:not(:disabled):not([readonly]):not([type=hidden]),select[required]:not(:disabled):not([readonly]),textarea[required]:not(:disabled):not([readonly])"),o=0;o<r.length;o++)if(0==r[o].checkValidity())return;t.submit()}),stepperElement.querySelector(".mdl-step:nth-child(2)").addEventListener("onstepback",function(e){Stepper.back()}),stepperElement.querySelector(".mdl-step:nth-child(2)").addEventListener("onstepcancel",function(e){dialog3.close()})}),document.querySelector('#worksheets-form__filter  select[name="period"]').addEventListener("change",function(){document.querySelector('#worksheets-form__filter input[name="start"]').value=this.options.item(this.selectedIndex).dataset.start,document.querySelector('#worksheets-form__filter input[name="end"]').value=this.options.item(this.selectedIndex).dataset.end}),new Vue({el:"#worksheets-dialog__import",data:{unassigned:[],projects:[]},methods:{getUnassigned:function(){this.$http.get("/api/worksheets/unassigned").then(function(e){this.$set("unassigned",e.body)},function(e){})},getProjects:function(){this.$http.get("/api/projects").then(function(e){this.$set("projects",e.body)},function(e){})},getAssignments:function(){this.getUnassigned(),this.getProjects()}},ready:function(){var e=this;stepperElement.querySelector(".mdl-step:nth-child(1)").addEventListener("onstepnext",function(t){e.getAssignments()}),setInterval(function(){componentHandler.upgradeDom(),componentHandler.upgradeAllRegistered()},100)}});